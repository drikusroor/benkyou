<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <title>Learn Japanese</title>
    <style>
        body {
            font-family: 'Prompt', 'Arial', sans-serif;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="min-h-screen bg-black flex flex-col items-center justify-center p-5">
        <div class="bg-black bg-opacity-60 shadow-lg rounded-xl p-8 w-full max-w-xl border border-purple-600">
            <h1 class="text-4xl font-bold mb-4 text-pink-400">Learn Japanese</h1>
            <h2 class="text-2xl font-semibold mb-6 text-purple-500 tracking-wider">100 most important Japanese sentences
                and words</h2>

            <form id="answerForm" class="space-y-4">
                <div id="question" class="text-xl text-white font-medium"></div>

                <div>
                    <input type="text" id="answer" placeholder="Type your answer"
                        class="w-full p-3 border border-purple-400 bg-opacity-50 bg-black text-white rounded-md focus:outline-none focus:border-pink-400 focus:ring focus:ring-purple-300 transition duration-150 ease-in-out">
                </div>

                <div>
                    <button type="submit"
                        class="bg-purple-600 text-white px-6 py-3 rounded-md hover:bg-pink-600 focus:outline-none focus:border-pink-700 focus:ring focus:ring-purple-400 active:bg-pink-700 transition duration-150 ease-in-out">
                        Submit
                    </button>
                </div>

                <div id="feedback" class="text-lg text-pink-400 font-medium"></div>
            </form>
        </div>
    </div>

    <script>

        const sentences = [
            {
                "japanese": "こんにちは (Konnichiwa)",
                "english": "Hello."
            },
            {
                "japanese": "こんばんは (Konbanwa)",
                "english": "Good evening."
            },
            {
                "japanese": "さようなら (Sayonara)",
                "english": "Goodbye."
            },
            {
                "japanese": "ありがとうございます (Arigatou gozaimasu)",
                "english": "Thank you."
            },
            {
                "japanese": "はい (Hai)",
                "english": "Yes."
            },
            {
                "japanese": "いいえ (Iie)",
                "english": "No."
            },
            {
                "japanese": "すみません (Sumimasen)",
                "english": "Excuse me."
            },
            {
                "japanese": "おはようございます (Ohayou gozaimasu)",
                "english": "Good morning."
            },
            {
                "japanese": "おやすみなさい (Oyasuminasai)",
                "english": "Goodnight."
            },
            {
                "japanese": "お名前は何ですか (Onamae wa nan desu ka?)",
                "english": "What's your name?"
            },
            {
                "japanese": "わたしは [name] です (Watashi wa [name] desu)",
                "english": "I am [name]."
            },
            {
                "japanese": "どこから来ましたか (Doko kara kimashita ka?)",
                "english": "Where are you from?"
            },
            {
                "japanese": "わたしは [country] から来ました (Watashi wa [country] kara kimashita)",
                "english": "I'm from [country]."
            },
            {
                "japanese": "日本語が分かりません (Nihongo ga wakarimasen)",
                "english": "I don't understand Japanese."
            },
            {
                "japanese": "英語を話せますか (Eigo o hanasemasu ka?)",
                "english": "Can you speak English?"
            },
            {
                "japanese": "トイレはどこですか (Toire wa doko desu ka?)",
                "english": "Where is the bathroom?"
            },
            {
                "japanese": "水をください (Mizu o kudasai)",
                "english": "Please give me water."
            },
            {
                "japanese": "いくらですか (Ikura desu ka?)",
                "english": "How much is it?"
            },
            {
                "japanese": "高いです (Takai desu)",
                "english": "It's expensive."
            },
            {
                "japanese": "安いです (Yasui desu)",
                "english": "It's cheap."
            },
            {
                "japanese": "美味しい (Oishii)",
                "english": "Delicious."
            },
            {
                "japanese": "お腹がすいた (Onaka ga suita)",
                "english": "I'm hungry."
            },
            {
                "japanese": "のどが渇いた (Nodo ga kawaita)",
                "english": "I'm thirsty."
            },
            {
                "japanese": "駅はどこですか (Eki wa doko desu ka?)",
                "english": "Where is the station?"
            },
            {
                "japanese": "これをください (Kore o kudasai)",
                "english": "I'll take this."
            },
            {
                "japanese": "助けて (Tasukete)",
                "english": "Help!"
            },
            {
                "japanese": "病院はどこですか (Byouin wa doko desu ka?)",
                "english": "Where is the hospital?"
            },
            {
                "japanese": "痛い (Itai)",
                "english": "It hurts."
            },
            {
                "japanese": "どれ (Dore?)",
                "english": "Which one?"
            },
            {
                "japanese": "今何時ですか (Ima nanji desu ka?)",
                "english": "What time is it now?"
            },
            {
                "japanese": "日本は初めてです (Nihon wa hajimete desu)",
                "english": "It's my first time in Japan."
            },
            {
                "japanese": "また会いましょう (Mata aimashou)",
                "english": "Let's meet again."
            },
            {
                "japanese": "分かりました (Wakarimashita)",
                "english": "I understand."
            },
            {
                "japanese": "もう一度言ってください (Mou ichido itte kudasai)",
                "english": "Please say it one more time."
            },
            {
                "japanese": "インターネットがつながりません (Inta-netto ga tsunagari masen)",
                "english": "The internet isn't working."
            },
            {
                "japanese": "メニューを見せてください (Menyu o misete kudasai)",
                "english": "Please show me the menu."
            },
            {
                "japanese": "チェックをください (Chekku o kudasai)",
                "english": "Check, please."
            },
            {
                "japanese": "電話番号は何ですか (Denwa bangou wa nan desu ka?)",
                "english": "What's your phone number?"
            },
            {
                "japanese": "予約したい (Yoyaku shitai)",
                "english": "I'd like to make a reservation."
            },
            {
                "japanese": "無料ですか (Muryou desu ka?)",
                "english": "Is it free?"
            },
            {
                "japanese": "ホテルはどこですか (Hoteru wa doko desu ka?)",
                "english": "Where is the hotel?"
            },
            {
                "japanese": "Wi-Fiのパスワードは何ですか (Wi-Fi no pasuwādo wa nan desu ka?)",
                "english": "What's the Wi-Fi password?"
            },
            {
                "japanese": "すぐに (Sugu ni)",
                "english": "Right away."
            },
            {
                "japanese": "ゆっくり (Yukkuri)",
                "english": "Slowly."
            },
            {
                "japanese": "大丈夫 (Daijoubu)",
                "english": "It's okay."
            },
            {
                "japanese": "違います (Chigaimasu)",
                "english": "It's wrong."
            },
            {
                "japanese": "わたしの (Watashi no)",
                "english": "Mine."
            },
            {
                "japanese": "いつ (Itsu?)",
                "english": "When?"
            },
            {
                "japanese": "どうして (Doushite?)",
                "english": "Why?"
            },
            {
                "japanese": "どこ (Doko?)",
                "english": "Where?"
            },
            {
                "japanese": "誰 (Dare?)",
                "english": "Who?"
            },
            {
                "japanese": "どう (Dou?)",
                "english": "How?"
            },
            {
                "japanese": "何 (Nani?)",
                "english": "What?"
            },
            {
                "japanese": "好きです (Suki desu)",
                "english": "I like it."
            },
            {
                "japanese": "嫌いです (Kirai desu)",
                "english": "I don't like it."
            },
            {
                "japanese": "もっと (Motto)",
                "english": "More."
            },
            {
                "japanese": "それで (Sore de)",
                "english": "And then?"
            },
            {
                "japanese": "こちら (Kochira)",
                "english": "This way."
            },
            {
                "japanese": "あそこ (Asoko)",
                "english": "Over there."
            },
            {
                "japanese": "今日 (Kyou)",
                "english": "Today."
            },
            {
                "japanese": "明日 (Ashita)",
                "english": "Tomorrow."
            },
            {
                "japanese": "昨日 (Kinou)",
                "english": "Yesterday."
            },
            {
                "japanese": "いつも (Itsumo)",
                "english": "Always."
            },
            {
                "japanese": "たまに (Tama ni)",
                "english": "Sometimes."
            },
            {
                "japanese": "もう (Mou)",
                "english": "Already."
            },
            {
                "japanese": "まだ (Mada)",
                "english": "Not yet."
            },
            {
                "japanese": "ここ (Koko)",
                "english": "Here."
            },
            {
                "japanese": "どうぞ (Douzo)",
                "english": "Please (when offering something)."
            },
            {
                "japanese": "よろしくお願いします (Yoroshiku onegaishimasu)",
                "english": "Nice to meet you / Please take care of it."
            },
            {
                "japanese": "遅い (Osoi)",
                "english": "Late."
            },
            {
                "japanese": "早い (Hayai)",
                "english": "Early."
            },
            {
                "japanese": "いい (Ii)",
                "english": "Good."
            },
            {
                "japanese": "悪い (Warui)",
                "english": "Bad."
            },
            {
                "japanese": "大きい (Ookii)",
                "english": "Big."
            },
            {
                "japanese": "小さい (Chiisai)",
                "english": "Small."
            },
            {
                "japanese": "長い (Nagai)",
                "english": "Long."
            },
            {
                "japanese": "短い (Mijikai)",
                "english": "Short."
            },
            {
                "japanese": "寒い (Samui)",
                "english": "Cold."
            },
            {
                "japanese": "暑い (Atsui)",
                "english": "Hot."
            },
            {
                "japanese": "眠い (Nemui)",
                "english": "Sleepy."
            },
            {
                "japanese": "うるさい (Urusai)",
                "english": "Noisy."
            },
            {
                "japanese": "静か (Shizuka)",
                "english": "Quiet."
            },
            {
                "japanese": "甘い (Amai)",
                "english": "Sweet."
            },
            {
                "japanese": "辛い (Karai)",
                "english": "Spicy."
            },
            {
                "japanese": "楽しい (Tanoshii)",
                "english": "Fun."
            },
            {
                "japanese": "つまらない (Tsumaranai)",
                "english": "Boring."
            },
            {
                "japanese": "新しい (Atarashii)",
                "english": "New."
            },
            {
                "japanese": "古い (Furui)",
                "english": "Old."
            },
            {
                "japanese": "近い (Chikai)",
                "english": "Near."
            },
            {
                "japanese": "遠い (Tooi)",
                "english": "Far."
            },
            {
                "japanese": "綺麗 (Kirei)",
                "english": "Beautiful."
            },
            {
                "japanese": "汚い (Kitanai)",
                "english": "Dirty."
            },
            {
                "japanese": "明るい (Akarui)",
                "english": "Bright."
            },
            {
                "japanese": "暗い (Kurai)",
                "english": "Dark."
            },
            {
                "japanese": "高い (Takai)",
                "english": "Tall."
            },
            {
                "japanese": "低い (Hikui)",
                "english": "Short (in height)."
            },
            {
                "japanese": "若い (Wakai)",
                "english": "Young."
            },
            {
                "japanese": "友達 (Tomodachi)",
                "english": "Friend."
            },
            {
                "japanese": "家族 (Kazoku)",
                "english": "Family."
            },
            {
                "japanese": "愛しています (Aishiteimasu)",
                "english": "I love you."
            },
        ]

        let currentSentence = {};
        let mistakes = {};

        if (localStorage.getItem('mistakes')) {
            mistakes = JSON.parse(localStorage.getItem('mistakes'));
        }

        function getNextSentence() {
            let prioritizedSentences = sentences.filter(s => mistakes[s.english] && mistakes[s.english] > 1);

            if (prioritizedSentences.length) {
                return prioritizedSentences[Math.floor(Math.random() * prioritizedSentences.length)];
            }

            return sentences[Math.floor(Math.random() * sentences.length)];
        }

        function levenshtein(a, b) {
            const matrix = [];

            if (a.length == 0) return b.length;
            if (b.length == 0) return a.length;

            for (let i = 0; i <= b.length; i++) {
                matrix[i] = [i];
            }

            for (let j = 0; j <= a.length; j++) {
                matrix[0][j] = j;
            }

            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    if (b.charAt(i - 1) == a.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(matrix[i - 1][j - 1] + 1, Math.min(matrix[i][j - 1] + 1, matrix[i - 1][j] + 1));
                    }
                }
            }

            return matrix[b.length][a.length];
        }


        function checkAnswer() {


            const userAnswer = document.getElementById('answer').value.trim();
            const feedback = document.getElementById('feedback');

            // The threshold can be adjusted based on your preferences.
            if (levenshtein(userAnswer, currentSentence.english) <= 2) {
                feedback.textContent = "Correct!";
                if (mistakes[currentSentence.english]) {
                    mistakes[currentSentence.english]--;
                }
            } else {
                feedback.textContent = "Incorrect! Correct answer: " + currentSentence.english;
                if (!mistakes[currentSentence.english]) {
                    mistakes[currentSentence.english] = 1;
                } else {
                    mistakes[currentSentence.english]++;
                }
            }

            localStorage.setItem('mistakes', JSON.stringify(mistakes));

            setTimeout(loadNextSentence, 2000);
        }

        document.getElementById('answerForm').addEventListener('submit', e => {
            e.preventDefault();
            checkAnswer();
        });

        function loadNextSentence() {
            currentSentence = getNextSentence();
            document.getElementById('question').textContent = currentSentence.japanese;
            document.getElementById('answer').value = '';
            document.getElementById('feedback').textContent = '';
        }

        loadNextSentence();
    </script>
</body>

</html>