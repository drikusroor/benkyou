<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <title>Learn Japanese</title>
    <style>
        body {
            font-family: 'Prompt', 'Arial', sans-serif;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="min-h-screen bg-black flex flex-col items-center justify-center p-5">
        <div class="bg-black bg-opacity-60 shadow-lg rounded-xl p-8 w-full max-w-xl border border-purple-600 bg-slate-900">
            <h1 class="text-4xl font-bold mb-4 text-pink-400">Learn Japanese</h1>
            <h2 class="text-2xl font-semibold mb-6 text-purple-500 tracking-wider">100 most important Japanese sentences
                and words</h2>

            <form id="answerForm" class="space-y-4">
                <div id="question" class="text-xl text-white font-medium"></div>

                <div>
                    <input type="text" id="answer" placeholder="Type your answer"
                        class="w-full p-3 border border-purple-400 bg-opacity-50 bg-slate-800 text-white rounded-md focus:outline-none focus:border-pink-400 focus:ring focus:ring-purple-300 transition duration-150 ease-in-out">
                </div>

                <div>
                    <button type="submit"
                        class="bg-purple-600 text-white px-6 py-3 rounded-md hover:bg-pink-600 focus:outline-none focus:border-pink-700 focus:ring focus:ring-purple-400 active:bg-pink-700 transition duration-150 ease-in-out">
                        Submit
                    </button>
                </div>

                <div id="feedback" class="text-lg text-pink-400 font-medium"></div>
            </form>
        </div>
    </div>

    <script>

        const sentences = [
            {
                "q": "こんにちは (Konnichiwa)",
                "a": [
                    "Hello."
                ]
            },
            {
                "q": "こんばんは (Konbanwa)",
                "a": [
                    "Good evening."
                ]
            },
            {
                "q": "さようなら (Sayonara)",
                "a": [
                    "Goodbye."
                ]
            },
            {
                "q": "ありがとうございます (Arigatou gozaimasu)",
                "a": [
                    "Thank you.",
                    "Thank you very much.",
                    "Thanks."
                ]
            },
            {
                "q": "はい (Hai)",
                "a": [
                    "Yes."
                ]
            },
            {
                "q": "いいえ (Iie)",
                "a": [
                    "No."
                ]
            },
            {
                "q": "すみません (Sumimasen)",
                "a": [
                    "Excuse me."
                ]
            },
            {
                "q": "おはようございます (Ohayou gozaimasu)",
                "a": [
                    "Good morning."
                ]
            },
            {
                "q": "おやすみなさい (Oyasuminasai)",
                "a": [
                    "Goodnight."
                ]
            },
            {
                "q": "お名前は何ですか (Onamae wa nan desu ka?)",
                "a": [
                    "What's your name?"
                ]
            },
            {
                "q": "わたしは [name] です (Watashi wa [name] desu)",
                "a": [
                    "I am [name]."
                ]
            },
            {
                "q": "どこから来ましたか (Doko kara kimashita ka?)",
                "a": [
                    "Where are you from?"
                ]
            },
            {
                "q": "わたしは [country] から来ました (Watashi wa [country] kara kimashita)",
                "a": [
                    "I'm from [country].",
                    "I came from [country]."
                ]
            },
            {
                "q": "日本語が分かりません (Nihongo ga wakarimasen)",
                "a": [
                    "I don't understand Japanese."
                ]
            },
            {
                "q": "英語を話せますか (Eigo o hanasemasu ka?)",
                "a": [
                    "Can you speak English?",
                    "Do you speak English?"
                ]
            },
            {
                "q": "トイレはどこですか (Toire wa doko desu ka?)",
                "a": [
                    "Where is the bathroom?",
                    "Where is the toilet?"
                ]
            },
            {
                "q": "水をください (Mizu o kudasai)",
                "a": [
                    "Please give me water.",
                    "Please give me some water.",
                    "Water, please."
                ]
            },
            {
                "q": "いくらですか (Ikura desu ka?)",
                "a": [
                    "How much is it?",
                    "How much does it cost?"
                ]
            },
            {
                "q": "高いです (Takai desu)",
                "a": [
                    "It's expensive."
                ]
            },
            {
                "q": "安いです (Yasui desu)",
                "a": [
                    "It's cheap."
                ]
            },
            {
                "q": "美味しい (Oishii)",
                "a": [
                    "Delicious.",
                    "Tasty."
                ]
            },
            {
                "q": "お腹がすいた (Onaka ga suita)",
                "a": [
                    "I'm hungry."
                ]
            },
            {
                "q": "のどが渇いた (Nodo ga kawaita)",
                "a": [
                    "I'm thirsty."
                ]
            },
            {
                "q": "駅はどこですか (Eki wa doko desu ka?)",
                "a": [
                    "Where is the station?"
                ]
            },
            {
                "q": "これをください (Kore o kudasai)",
                "a": [
                    "I'll take this."
                ]
            },
            {
                "q": "助けて (Tasukete)",
                "a": [
                    "Help!"
                ]
            },
            {
                "q": "病院はどこですか (Byouin wa doko desu ka?)",
                "a": [
                    "Where is the hospital?"
                ]
            },
            {
                "q": "痛い (Itai)",
                "a": [
                    "It hurts."
                ]
            },
            {
                "q": "どれ (Dore?)",
                "a": [
                    "Which one?", "Which?"
                ]
            },
            {
                "q": "今何時ですか (Ima nanji desu ka?)",
                "a": [
                    "What time is it now?"
                ]
            },
            {
                "q": "日本は初めてです (Nihon wa hajimete desu)",
                "a": [
                    "It's my first time in Japan."
                ]
            },
            {
                "q": "また会いましょう (Mata aimashou)",
                "a": [
                    "Let's meet again."
                ]
            },
            {
                "q": "分かりました (Wakarimashita)",
                "a": [
                    "I understand."
                ]
            },
            {
                "q": "もう一度言ってください (Mou ichido itte kudasai)",
                "a": [
                    "Please say it one more time."
                ]
            },
            {
                "q": "インターネットがつながりません (Inta-netto ga tsunagari masen)",
                "a": [
                    "The internet isn't working."
                ]
            },
            {
                "q": "メニューを見せてください (Menyu o misete kudasai)",
                "a": [
                    "Please show me the menu."
                ]
            },
            {
                "q": "チェックをください (Chekku o kudasai)",
                "a": [
                    "Check, please.",
                ]
            },
            {
                "q": "電話番号は何ですか (Denwa bangou wa nan desu ka?)",
                "a": [
                    "What's your phone number?"
                ]
            },
            {
                "q": "予約したい (Yoyaku shitai)",
                "a": [
                    "I'd like to make a reservation."
                ]
            },
            {
                "q": "無料ですか (Muryou desu ka?)",
                "a": [
                    "Is it free?"
                ]
            },
            {
                "q": "ホテルはどこですか (Hoteru wa doko desu ka?)",
                "a": [
                    "Where is the hotel?"
                ]
            },
            {
                "q": "Wi-Fiのパスワードは何ですか (Wi-Fi no pasuwādo wa nan desu ka?)",
                "a": [
                    "What's the Wi-Fi password?"
                ]
            },
            {
                "q": "すぐに (Sugu ni)",
                "a": [
                    "Right away."
                ]
            },
            {
                "q": "ゆっくり (Yukkuri)",
                "a": [
                    "Slowly."
                ]
            },
            {
                "q": "大丈夫 (Daijoubu)",
                "a": [
                    "It's okay."
                ]
            },
            {
                "q": "違います (Chigaimasu)",
                "a": [
                    "It's wrong."
                ]
            },
            {
                "q": "わたしの (Watashi no)",
                "a": [
                    "Mine.",
                    "My."
                ]
            },
            {
                "q": "いつ (Itsu?)",
                "a": [
                    "When?"
                ]
            },
            {
                "q": "どうして (Doushite?)",
                "a": [
                    "Why?"
                ]
            },
            {
                "q": "どこ (Doko?)",
                "a": [
                    "Where?"
                ]
            },
            {
                "q": "誰 (Dare?)",
                "a": [
                    "Who?"
                ]
            },
            {
                "q": "どう (Dou?)",
                "a": [
                    "How?"
                ]
            },
            {
                "q": "何 (Nani?)",
                "a": [
                    "What?"
                ]
            },
            {
                "q": "好きです (Suki desu)",
                "a": [
                    "I like it."
                ]
            },
            {
                "q": "嫌いです (Kirai desu)",
                "a": [
                    "I don't like it."
                ]
            },
            {
                "q": "もっと (Motto)",
                "a": [
                    "More."
                ]
            },
            {
                "q": "それで (Sore de)",
                "a": [
                    "And then?"
                ]
            },
            {
                "q": "こちら (Kochira)",
                "a": [
                    "This way."
                ]
            },
            {
                "q": "あそこ (Asoko)",
                "a": [
                    "Over there."
                ]
            },
            {
                "q": "今日 (Kyou)",
                "a": [
                    "Today."
                ]
            },
            {
                "q": "明日 (Ashita)",
                "a": [
                    "Tomorrow."
                ]
            },
            {
                "q": "昨日 (Kinou)",
                "a": [
                    "Yesterday."
                ]
            },
            {
                "q": "いつも (Itsumo)",
                "a": [
                    "Always."
                ]
            },
            {
                "q": "たまに (Tama ni)",
                "a": [
                    "Sometimes."
                ]
            },
            {
                "q": "もう (Mou)",
                "a": [
                    "Already."
                ]
            },
            {
                "q": "まだ (Mada)",
                "a": [
                    "Not yet."
                ]
            },
            {
                "q": "ここ (Koko)",
                "a": [
                    "Here."
                ]
            },
            {
                "q": "どうぞ (Douzo)",
                "a": [
                    "Please (when offering something)."
                ]
            },
            {
                "q": "よろしくお願いします (Yoroshiku onegaishimasu)",
                "a": [
                    "Nice to meet you",
                    "Please take care of it."
                ]
            },
            {
                "q": "遅い (Osoi)",
                "a": [
                    "Late."
                ]
            },
            {
                "q": "早い (Hayai)",
                "a": [
                    "Early."
                ]
            },
            {
                "q": "いい (Ii)",
                "a": [
                    "Good.",
                    "Fine.",
                    "Okay.",
                    "Nice."
                ]
            },
            {
                "q": "悪い (Warui)",
                "a": [
                    "Bad."
                ]
            },
            {
                "q": "大きい (Ookii)",
                "a": [
                    "Big."
                ]
            },
            {
                "q": "小さい (Chiisai)",
                "a": [
                    "Small."
                ]
            },
            {
                "q": "長い (Nagai)",
                "a": [
                    "Long."
                ]
            },
            {
                "q": "短い (Mijikai)",
                "a": [
                    "Short."
                ]
            },
            {
                "q": "寒い (Samui)",
                "a": [
                    "Cold."
                ]
            },
            {
                "q": "暑い (Atsui)",
                "a": [
                    "Hot."
                ]
            },
            {
                "q": "眠い (Nemui)",
                "a": [
                    "Sleepy."
                ]
            },
            {
                "q": "うるさい (Urusai)",
                "a": [
                    "Noisy."
                ]
            },
            {
                "q": "静か (Shizuka)",
                "a": [
                    "Quiet."
                ]
            },
            {
                "q": "甘い (Amai)",
                "a": [
                    "Sweet."
                ]
            },
            {
                "q": "辛い (Karai)",
                "a": [
                    "Spicy."
                ]
            },
            {
                "q": "楽しい (Tanoshii)",
                "a": [
                    "Fun."
                ]
            },
            {
                "q": "つまらない (Tsumaranai)",
                "a": [
                    "Boring."
                ]
            },
            {
                "q": "新しい (Atarashii)",
                "a": [
                    "New."
                ]
            },
            {
                "q": "古い (Furui)",
                "a": [
                    "Old."
                ]
            },
            {
                "q": "近い (Chikai)",
                "a": [
                    "Near.", "Close."
                ]
            },
            {
                "q": "遠い (Tooi)",
                "a": [
                    "Far."
                ]
            },
            {
                "q": "綺麗 (Kirei)",
                "a": [
                    "Beautiful."
                ]
            },
            {
                "q": "汚い (Kitanai)",
                "a": [
                    "Dirty."
                ]
            },
            {
                "q": "明るい (Akarui)",
                "a": [
                    "Bright."
                ]
            },
            {
                "q": "暗い (Kurai)",
                "a": [
                    "Dark."
                ]
            },
            {
                "q": "高い (Takai)",
                "a": [
                    "Tall.",
                    "High.",
                ]
            },
            {
                "q": "低い (Hikui)",
                "a": [
                    "Short (in height)."
                ]
            },
            {
                "q": "若い (Wakai)",
                "a": [
                    "Young."
                ]
            },
            {
                "q": "友達 (Tomodachi)",
                "a": [
                    "Friend."
                ]
            },
            {
                "q": "家族 (Kazoku)",
                "a": [
                    "Family."
                ]
            },
            {
                "q": "愛しています (Aishiteimasu)",
                "a": [
                    "I love you."
                ]
            }
        ]


        let currentSentence = {};
        let mistakes = {};

        if (localStorage.getItem('mistakes')) {
            mistakes = JSON.parse(localStorage.getItem('mistakes'));
        }

        function getNextSentence() {
            let prioritizedSentences = sentences.filter(s => mistakes[s.q] && mistakes[s.q] > 1);

            if (prioritizedSentences.length) {
                return prioritizedSentences[Math.floor(Math.random() * prioritizedSentences.length)];
            }

            return sentences[Math.floor(Math.random() * sentences.length)];
        }

        function levenshtein(a, b) {
            const matrix = [];

            if (a.length == 0) return b.length;
            if (b.length == 0) return a.length;

            for (let i = 0; i <= b.length; i++) {
                matrix[i] = [i];
            }

            for (let j = 0; j <= a.length; j++) {
                matrix[0][j] = j;
            }

            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    if (b.charAt(i - 1) == a.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(matrix[i - 1][j - 1] + 1, Math.min(matrix[i][j - 1] + 1, matrix[i - 1][j] + 1));
                    }
                }
            }

            return matrix[b.length][a.length];
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('answer').value.trim();
            const feedback = document.getElementById('feedback');

            // Check against each possible English translation
            let isCorrect = currentSentence.a.some(translation => levenshtein(userAnswer, translation) <= 2);

            if (isCorrect) {
                feedback.textContent = "Correct! " + `${currentSentence.a.join(', ')}`;
                if (mistakes[currentSentence.q]) {
                    mistakes[currentSentence.q]--;
                }
            } else {
                feedback.textContent = "Incorrect! Correct answers: " + currentSentence.a.join(', ');
                if (!mistakes[currentSentence.q]) {
                    mistakes[currentSentence.q] = 1;
                } else {
                    mistakes[currentSentence.q]++;
                }
            }

            localStorage.setItem('mistakes', JSON.stringify(mistakes));

            setTimeout(loadNextSentence, 2000);
        }

        document.getElementById('answerForm').addEventListener('submit', e => {
            e.preventDefault();
            checkAnswer();
        });

        function loadNextSentence() {
            currentSentence = getNextSentence();
            document.getElementById('question').textContent = currentSentence.q;
            document.getElementById('answer').value = '';
            document.getElementById('feedback').textContent = '';
        }

        loadNextSentence();
    </script>
</body>

</html>